{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/layersArrange.js","webpack://exports/external \"sketch\""],"names":["sketch","require","document","getSelectedDocument","mySelectedLayers","selectedLayers","layers","ab","abListLength","maxHeight","minX","minY","isArtboard","runSun","length","UI","message","i","type","layerList","j","name","frame","y","x","expectMarginX","expectMarginY","height"],"mappings":"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","file":"__layersArrange.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/layersArrange.js\");\n","// 自动设置画板内的所有图层左上角对齐，且画板高度与内容自适应\nvar sketch = require('sketch');\nvar document = sketch.getSelectedDocument(); // 当前文档\nvar mySelectedLayers = document.selectedLayers; // 选中的图层\nmySelectedLayers = mySelectedLayers.layers\n\nvar ab // 画板\nvar abListLength = 0 // 记录选中的画板数量\nvar maxHeight = 0 // 记录画板图层的最高长度（y+height）\nvar minX // 图层的最小 x\nvar minY // 图层的最小 y\nvar isArtboard = false // 标记图层是否为画板\nvar runSun = 0 // 记录查询画板的层级数\n\n// console.log(mySelectedLayers)\nif (mySelectedLayers.length == 0) {\n    sketch.UI.message('⚠️ 请选中画板')\n}\n\n// --- 遍历所有选中的图层 --- \nfor (var i = 0; i < mySelectedLayers.length; i++) {\n\n    // --- 首先找到画板 ---\n    if (mySelectedLayers[i].type == 'Artboard') {\n        // 如果当前选中的是画板\n        ab = mySelectedLayers[i]\n        abListLength += 1 // 记录选中的画板数量\n    } else {\n        // 忽略非画板图层\n        continue\n\n        // // 当前选中的不是画板，则向上查找父级画板\n        // ab = mySelectedLayers[i].parent // 取当前选中图层的父图层\n        // runSun = 0\n        // while (isArtboard == false) {\n        //     runSun += 1 // 记录遍历次数，达到上限则跳出\n        //     // 判断图层是否为画板\n        //     if (ab.type == 'Artboard') {\n        //         isArtboard = true\n        //     } else {\n        //         // 不是画板则继续向上查询\n        //         ab = ab.parent\n        //     }\n        //     // 增加上限值，避免处理时间过长\n        //     if (runSun >= 10) {\n        //         break\n        //     }\n        // }\n    }\n\n    maxHeight = 0 // 记录最大长度，每个画板的值要重置\n    layerList = ab.layers // 当前画板下的图层列表\n\n    // --- 左上角对齐 ---\n    minX = 10000000\n    minY = 10000000\n\n    // 遍历画板内所有图层\n    for (var j = 0; j < layerList.length; j++) {\n\n        // 忽略时间信息\n        if (layerList[j].name == '[time]') {\n            continue\n        }\n\n        // 查找 x、y 的最小值\n        if (layerList[j].frame.y < minY) {\n\n            minY = layerList[j].frame.y\n        }\n        if (layerList[j].frame.x < minX) {\n            minX = layerList[j].frame.x\n        }\n    }\n\n    /*\n    所有图层以父级画板为基准，左上角对齐：\n    理想 bbox = 100,100\n    minX、minY 为实际边距\n    */\n    var expectMarginX, expectMarginY // 实际 bbox 与理想的差距\n    expectMarginX = 100 - minX\n    expectMarginY = 100 - minY\n\n    if (minX != 100 || minY != 100) {\n        // x、y 只要有 1 个不是理想值，则需要进行对齐处理\n        for (var j = 0; j < layerList.length; j++) {\n\n            // 忽略时间信息图层\n            if (layerList[j].name == '[time]') {\n                continue\n            }\n\n            // 所有图层移动相同距离\n            layerList[j].frame.y += expectMarginY\n            layerList[j].frame.x += expectMarginX\n\n        }\n    }\n\n    // --- 画板高度自适应 ---\n    for (var j = 0; j < layerList.length; j++) {\n\n        // 取 y + height 最大的图层\n        if (layerList[j].frame.y + layerList[j].frame.height > maxHeight) {\n            maxHeight = layerList[j].frame.y + layerList[j].frame.height\n        }\n    }\n\n    if (ab.frame.height == maxHeight + 100) {\n        // 如果当前画板高度已经达到预期，则忽略\n    } else {\n        ab.frame.height = maxHeight + 100\n    }\n\n}\n\nif (abListLength == 0) {\n    sketch.UI.message('⚠️ 请选中画板')\n} else {\n    sketch.UI.message('✅ 操作成功')\n}","module.exports = require(\"sketch\");"],"sourceRoot":""}