{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/setUpdateTime.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\""],"names":["sketch","require","document","getSelectedDocument","selection","selectedLayers","Text","layers","length","UI","message","userName","isArtboard","ab","runSun","timeIsExist","timeTextLayer","type","parent","i","name","myDate","Date","addZero","m","year","getFullYear","month","getMonth","date","getDate","hours","getHours","minutes","getMinutes","text","index","frame","x","y","style","fontSize","textColor","locked"],"mappings":"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","file":"__setUpdateTime.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/setUpdateTime.js\");\n","// 在当前画板插入时间\nvar sketch = require('sketch');\n\nexport default function () {\n    var document = sketch.getSelectedDocument(); // 当前 .sketch 文档\n    var selection = document.selectedLayers // 选中的图层列表\n\n    var Text = require('sketch/dom').Text\n\n    if (selection.layers.length == 0) {\n        sketch.UI.message('⚠️ 请选中画板或图层')\n        return\n    }\n    if (selection.layers.length > 1) {\n        sketch.UI.message('⚠️ 最多选中 1 画板或图层')\n        return\n    }\n\n    //  --- 在 '' 符号内配置你的姓名 ---\n    var userName = ''\n\n    var isArtboard = false // 记录是否为画板\n    var ab // 画板\n    var runSun = 0 // 记录查询画板的层级数\n    var timeIsExist = false // 记录是否为时间图层\n    var timeTextLayer // 时间图层\n\n    // --- 获取画板 ---\n    if (selection.layers[0].type == 'Artboard') {\n        // 如果当前选中的是画板\n        ab = selection.layers[0]\n    } else {\n        ab = selection.layers[0].parent // 取当前选中图层的父图层\n\n        while (isArtboard == false) {\n            runSun += 1 // 记录遍历次数，达到上限则跳出\n            // 判断图层是否为画板\n            if (ab.type == 'Artboard') {\n                isArtboard = true\n            } else {\n                // 不是画板则继续向上查询\n                ab = ab.parent\n            }\n            // 增加上限值，避免处理时间过长\n            if (runSun >= 10) {\n                break\n            }\n        }\n    }\n\n    // --- 设置时间信息 ---\n\n    // 遍历当前画板，查询是否已存在时间信息\n    for (var i = ab.layers.length - 1; i >= 0; i--) {\n        if (ab.layers[i].name == '[time]') {\n            timeIsExist = true\n            timeTextLayer = ab.layers[i]\n            break\n        }\n    }\n\n    // 获取当前时间\n    var myDate = new Date();\n\n    function addZero(m) {\n        return m < 10 ? '0' + m : m;\n    }\n\n    var year = myDate.getFullYear()\n    var month = myDate.getMonth() + 1\n    var date = myDate.getDate()\n    var hours = myDate.getHours()\n    var minutes = myDate.getMinutes()\n\n    month = addZero(month)\n    hours = addZero(hours)\n    minutes = addZero(minutes)\n    date = addZero(date)\n\n    myDate = year + '-' + month + '-' + date + ' ' + hours + ':' + minutes\n\n    if (timeIsExist) {\n        // 已存在则更新\n        timeTextLayer.text = '最近更新：' + myDate + ' ' + userName\n        timeTextLayer.name = '[time]'\n        timeTextLayer.index = ab.layers.length - 1\n    } else {\n        // 不存在则新增\n        var text = new Text({\n            text: '最近更新：' + myDate + ' ' + userName,\n            //alignment: Text.Alignment.center\n            parent: ab\n        })\n\n        text.name = '[time]'\n        text.frame.x = 10\n        text.frame.y = 10\n        text.style.fontSize = 28\n        text.style.textColor = '#999999'\n        text.index = ab.layers.length - 1\n\n        text.locked = true\n    }\n\n    sketch.UI.message('✅ 已添加时间：' + myDate)\n}","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");"],"sourceRoot":""}